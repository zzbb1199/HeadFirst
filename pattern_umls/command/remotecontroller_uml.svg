<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="350px" preserveAspectRatio="none" style="width:975px;height:349px;" version="1.1" viewBox="0 0 975 349" width="975.8px" zoomAndPan="magnify"><defs><filter height="300%" id="fssg3dpeqpnv" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.799999952316284"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="5.599999904632568" dy="5.599999904632568" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--class Client--><rect fill="#FEFECE" filter="url(#fssg3dpeqpnv)" height="67.2" id="Client" style="stroke: #A80036; stroke-width: 2.099999964237213;" width="89.6" x="57.4" y="32.2"/><ellipse cx="78.4" cy="54.6" fill="#ADD1B2" rx="15.4" ry="15.4" style="stroke: #A80036; stroke-width: 1.399999976158142;"/><path d="M77.9625,63 Q75.25,63 73.675,60.9984 Q72.1,58.9969 72.1,54.8625 Q72.1,51.3625 73.7625,49 Q75.425,46.6375 78.3125,46.6375 Q78.9469,46.6375 79.5594,46.6375 Q80.1719,46.6375 80.6094,46.6375 Q80.9594,46.6375 81.1891,46.6375 Q81.4187,46.6375 81.9875,46.6375 L82.9719,51.8 L81.4844,51.8 Q80.8719,50.2687 80.0734,49.6344 Q79.275,49 77.9844,49 Q76.3656,49 75.4141,50.6516 Q74.4625,52.3031 74.4625,54.8625 Q74.4625,57.6844 75.1953,59.1609 Q75.9281,60.6375 77.8969,60.6375 Q79.1875,60.6375 80.0953,59.8391 Q81.0031,59.0406 81.4844,57.0937 L82.9281,57.8156 Q82.3812,60.2656 81.0687,61.6328 Q79.7562,63 77.9625,63 Z "/><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="44.8" x="98" y="62.3807">Client</text><line style="stroke: #A80036; stroke-width: 2.099999964237213;" x1="58.8" x2="145.6" y1="77" y2="77"/><line style="stroke: #A80036; stroke-width: 2.099999964237213;" x1="58.8" x2="145.6" y1="88.2" y2="88.2"/><!--class Light--><rect fill="#FEFECE" filter="url(#fssg3dpeqpnv)" height="109.2643" id="Light" style="stroke: #A80036; stroke-width: 2.099999964237213;" width="82.6" x="196.7" y="11.2"/><ellipse cx="217.7" cy="33.6" fill="#ADD1B2" rx="15.4" ry="15.4" style="stroke: #A80036; stroke-width: 1.399999976158142;"/><path d="M217.2625,42 Q214.55,42 212.975,39.9984 Q211.4,37.9969 211.4,33.8625 Q211.4,30.3625 213.0625,28 Q214.725,25.6375 217.6125,25.6375 Q218.2469,25.6375 218.8594,25.6375 Q219.4719,25.6375 219.9094,25.6375 Q220.2594,25.6375 220.4891,25.6375 Q220.7187,25.6375 221.2875,25.6375 L222.2719,30.8 L220.7844,30.8 Q220.1719,29.2687 219.3734,28.6344 Q218.575,28 217.2844,28 Q215.6656,28 214.7141,29.6516 Q213.7625,31.3031 213.7625,33.8625 Q213.7625,36.6844 214.4953,38.1609 Q215.2281,39.6375 217.1969,39.6375 Q218.4875,39.6375 219.3953,38.8391 Q220.3031,38.0406 220.7844,36.0937 L222.2281,36.8156 Q221.6812,39.2656 220.3687,40.6328 Q219.0562,42 217.2625,42 Z "/><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="37.8" x="237.3" y="41.3807">Light</text><line style="stroke: #A80036; stroke-width: 2.099999964237213;" x1="198.1" x2="277.9" y1="56" y2="56"/><line style="stroke: #A80036; stroke-width: 2.099999964237213;" x1="198.1" x2="277.9" y1="67.2" y2="67.2"/><text fill="#000000" font-family="sans-serif" font-size="15.4" lengthAdjust="spacingAndGlyphs" textLength="28" x="205.1" y="90.4483">on()</text><text fill="#000000" font-family="sans-serif" font-size="15.4" lengthAdjust="spacingAndGlyphs" textLength="30.8" x="205.1" y="111.4805">off()</text><!--class Command--><rect fill="#FEFECE" filter="url(#fssg3dpeqpnv)" height="109.2643" id="Command" style="stroke: #A80036; stroke-width: 2.099999964237213;" width="127.4" x="328.3" y="11.2"/><ellipse cx="349.3" cy="33.6" fill="#B4A7E5" rx="15.4" ry="15.4" style="stroke: #A80036; stroke-width: 1.399999976158142;"/><path d="M344.925,28 L344.925,25.6375 L353.2375,25.6375 L353.2375,28 L350.6125,28 Q350.3937,28 350.3281,28.0437 Q350.2625,28.0875 350.2625,28.1531 L350.2625,39.4844 Q350.2625,39.55 350.3281,39.5937 Q350.3937,39.6375 350.6125,39.6375 L353.2375,39.6375 L353.2375,42 L344.925,42 L344.925,39.6375 L347.55,39.6375 Q347.8344,39.6375 347.8672,39.6156 Q347.9,39.5937 347.9,39.4844 L347.9,28.1531 Q347.9,28.0437 347.8672,28.0219 Q347.8344,28 347.55,28 L344.925,28 Z "/><text fill="#000000" font-family="sans-serif" font-size="16.8" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="82.6" x="368.9" y="41.3807">Command</text><line style="stroke: #A80036; stroke-width: 2.099999964237213;" x1="329.7" x2="454.3" y1="56" y2="56"/><text fill="#000000" font-family="sans-serif" font-size="15.4" lengthAdjust="spacingAndGlyphs" textLength="33.6" x="336.7" y="79.2483">undo</text><line style="stroke: #A80036; stroke-width: 2.099999964237213;" x1="329.7" x2="454.3" y1="88.2321" y2="88.2321"/><text fill="#000000" font-family="sans-serif" font-size="15.4" lengthAdjust="spacingAndGlyphs" textLength="65.8" x="336.7" y="111.4805">execute()</text><!--class LightOnCommand--><rect fill="#FEFECE" filter="url(#fssg3dpeqpnv)" height="130.2964" id="LightOnCommand" style="stroke: #A80036; stroke-width: 2.099999964237213;" width="187.6" x="8.4" y="204.4"/><ellipse cx="29.4" cy="226.8" fill="#ADD1B2" rx="15.4" ry="15.4" style="stroke: #A80036; stroke-width: 1.399999976158142;"/><path d="M28.9625,235.2 Q26.25,235.2 24.675,233.1984 Q23.1,231.1969 23.1,227.0625 Q23.1,223.5625 24.7625,221.2 Q26.425,218.8375 29.3125,218.8375 Q29.9469,218.8375 30.5594,218.8375 Q31.1719,218.8375 31.6094,218.8375 Q31.9594,218.8375 32.1891,218.8375 Q32.4187,218.8375 32.9875,218.8375 L33.9719,224 L32.4844,224 Q31.8719,222.4687 31.0734,221.8344 Q30.275,221.2 28.9844,221.2 Q27.3656,221.2 26.4141,222.8516 Q25.4625,224.5031 25.4625,227.0625 Q25.4625,229.8844 26.1953,231.3609 Q26.9281,232.8375 28.8969,232.8375 Q30.1875,232.8375 31.0953,232.0391 Q32.0031,231.2406 32.4844,229.2937 L33.9281,230.0156 Q33.3812,232.4656 32.0687,233.8328 Q30.7562,235.2 28.9625,235.2 Z "/><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="142.8" x="49" y="234.5807">LightOnCommand</text><line style="stroke: #A80036; stroke-width: 2.099999964237213;" x1="9.8" x2="194.6" y1="249.2" y2="249.2"/><text fill="#000000" font-family="sans-serif" font-size="15.4" lengthAdjust="spacingAndGlyphs" textLength="63" x="16.8" y="272.4483">Light light</text><line style="stroke: #A80036; stroke-width: 2.099999964237213;" x1="9.8" x2="194.6" y1="281.4321" y2="281.4321"/><text fill="#000000" font-family="sans-serif" font-size="15.4" lengthAdjust="spacingAndGlyphs" textLength="28" x="16.8" y="304.6805">on()</text><text fill="#000000" font-family="sans-serif" font-size="15.4" lengthAdjust="spacingAndGlyphs" textLength="44.8" x="16.8" y="325.7126">undo()</text><!--class LightOffCommand--><rect fill="#FEFECE" filter="url(#fssg3dpeqpnv)" height="130.2964" id="LightOffCommand" style="stroke: #A80036; stroke-width: 2.099999964237213;" width="186.2" x="245.7" y="204.4"/><ellipse cx="266.7" cy="226.8" fill="#ADD1B2" rx="15.4" ry="15.4" style="stroke: #A80036; stroke-width: 1.399999976158142;"/><path d="M266.2625,235.2 Q263.55,235.2 261.975,233.1984 Q260.4,231.1969 260.4,227.0625 Q260.4,223.5625 262.0625,221.2 Q263.725,218.8375 266.6125,218.8375 Q267.2469,218.8375 267.8594,218.8375 Q268.4719,218.8375 268.9094,218.8375 Q269.2594,218.8375 269.4891,218.8375 Q269.7187,218.8375 270.2875,218.8375 L271.2719,224 L269.7844,224 Q269.1719,222.4687 268.3734,221.8344 Q267.575,221.2 266.2844,221.2 Q264.6656,221.2 263.7141,222.8516 Q262.7625,224.5031 262.7625,227.0625 Q262.7625,229.8844 263.4953,231.3609 Q264.2281,232.8375 266.1969,232.8375 Q267.4875,232.8375 268.3953,232.0391 Q269.3031,231.2406 269.7844,229.2937 L271.2281,230.0156 Q270.6812,232.4656 269.3687,233.8328 Q268.0562,235.2 266.2625,235.2 Z "/><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="141.4" x="286.3" y="234.5807">LightOffCommand</text><line style="stroke: #A80036; stroke-width: 2.099999964237213;" x1="247.1" x2="430.5" y1="249.2" y2="249.2"/><text fill="#000000" font-family="sans-serif" font-size="15.4" lengthAdjust="spacingAndGlyphs" textLength="63" x="254.1" y="272.4483">Light light</text><line style="stroke: #A80036; stroke-width: 2.099999964237213;" x1="247.1" x2="430.5" y1="281.4321" y2="281.4321"/><text fill="#000000" font-family="sans-serif" font-size="15.4" lengthAdjust="spacingAndGlyphs" textLength="30.8" x="254.1" y="304.6805">off()</text><text fill="#000000" font-family="sans-serif" font-size="15.4" lengthAdjust="spacingAndGlyphs" textLength="44.8" x="254.1" y="325.7126">undo()</text><!--class RemoteController--><rect fill="#FEFECE" filter="url(#fssg3dpeqpnv)" height="109.2643" id="RemoteController" style="stroke: #A80036; stroke-width: 2.099999964237213;" width="182" x="481.6" y="214.9"/><ellipse cx="502.6" cy="237.3" fill="#ADD1B2" rx="15.4" ry="15.4" style="stroke: #A80036; stroke-width: 1.399999976158142;"/><path d="M502.1625,245.7 Q499.45,245.7 497.875,243.6984 Q496.3,241.6969 496.3,237.5625 Q496.3,234.0625 497.9625,231.7 Q499.625,229.3375 502.5125,229.3375 Q503.1469,229.3375 503.7594,229.3375 Q504.3719,229.3375 504.8094,229.3375 Q505.1594,229.3375 505.3891,229.3375 Q505.6187,229.3375 506.1875,229.3375 L507.1719,234.5 L505.6844,234.5 Q505.0719,232.9687 504.2734,232.3344 Q503.475,231.7 502.1844,231.7 Q500.5656,231.7 499.6141,233.3516 Q498.6625,235.0031 498.6625,237.5625 Q498.6625,240.3844 499.3953,241.8609 Q500.1281,243.3375 502.0969,243.3375 Q503.3875,243.3375 504.2953,242.5391 Q505.2031,241.7406 505.6844,239.7937 L507.1281,240.5156 Q506.5812,242.9656 505.2687,244.3328 Q503.9562,245.7 502.1625,245.7 Z "/><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="137.2" x="522.2" y="245.0807">RemoteController</text><line style="stroke: #A80036; stroke-width: 2.099999964237213;" x1="483" x2="662.2" y1="259.7" y2="259.7"/><text fill="#000000" font-family="sans-serif" font-size="15.4" lengthAdjust="spacingAndGlyphs" textLength="134.4" x="490" y="282.9483">Command command</text><line style="stroke: #A80036; stroke-width: 2.099999964237213;" x1="483" x2="662.2" y1="291.9321" y2="291.9321"/><text fill="#000000" font-family="sans-serif" font-size="15.4" lengthAdjust="spacingAndGlyphs" textLength="109.2" x="490" y="315.1805">buttonPressed()</text><path d="M504.7,46.2 L504.7,85.0562 L959.7,85.0562 L959.7,60.2 L945.7,46.2 L504.7,46.2 " fill="#FBFB77" filter="url(#fssg3dpeqpnv)" style="stroke: #A80036; stroke-width: 1.399999976158142;"/><path d="M945.7,46.2 L945.7,60.2 L959.7,60.2 L945.7,46.2 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.399999976158142;"/><text fill="#000000" font-family="sans-serif" font-size="18.2" lengthAdjust="spacingAndGlyphs" textLength="425.6" x="513.1" y="74.0571">调用者(RemoteController) 完全和执行实体(Light)解耦</text><!--link Command to LightOnCommand--><path d="M304.9088,127.575 C270.0824,151.718 229.9262,179.5556 194.5888,204.0524 " fill="none" id="Command-LightOnCommand" style="stroke: #A80036; stroke-width: 1.399999976158142; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="299.4488,119.4354,328.0438,111.5366,310.6152,135.5438,299.4488,119.4354" style="stroke: #A80036; stroke-width: 1.399999976158142;"/><!--link Command to LightOffCommand--><path d="M370.6444,147.847 C365.6842,166.5776 360.4706,186.2644 355.7316,204.1619 " fill="none" id="Command-LightOffCommand" style="stroke: #A80036; stroke-width: 1.399999976158142; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="361.242,145.068,377.8824,120.5106,380.1882,150.0856,361.242,145.068" style="stroke: #A80036; stroke-width: 1.399999976158142;"/><!--link Light to LightOnCommand--><path d="M197.8312,126.6244 C181.3406,151.0208 162.2138,179.3162 145.4195,204.1619 " fill="none" id="Light-LightOnCommand" style="stroke: #A80036; stroke-width: 1.399999976158142;"/><polygon fill="#A80036" points="201.964,120.5106,190.2688,127.8141,198.0443,126.3102,199.5482,134.0857,201.964,120.5106" style="stroke: #A80036; stroke-width: 1.399999976158142;"/><!--link Light to LightOffCommand--><path d="M268.1266,127.2446 C280.2968,151.4996 294.3584,179.5262 306.719,204.1619 " fill="none" id="Light-LightOffCommand" style="stroke: #A80036; stroke-width: 1.399999976158142;"/><polygon fill="#A80036" points="264.7484,120.5106,265.3921,134.284,267.8869,126.7676,275.4033,129.2624,264.7484,120.5106" style="stroke: #A80036; stroke-width: 1.399999976158142;"/><!--link Command to RemoteController--><path d="M444.8906,126.035 C470.0556,154.028 499.9274,187.2598 524.4526,214.5408 " fill="none" id="Command-RemoteController" style="stroke: #A80036; stroke-width: 1.399999976158142;"/><polygon fill="#A80036" points="439.9234,120.5106,444.1824,133.6248,444.6032,125.7163,452.5116,126.1371,439.9234,120.5106" style="stroke: #A80036; stroke-width: 1.399999976158142;"/><!--link Client to Light--><path d="M147.2898,65.8 C161.2702,65.8 175.2506,65.8 189.231,65.8 " fill="none" id="Client-Light" style="stroke: #A80036; stroke-width: 1.399999976158142;"/><polygon fill="#A80036" points="196.5432,65.8,183.9432,60.2,189.5432,65.8,183.9432,71.4,196.5432,65.8" style="stroke: #A80036; stroke-width: 1.399999976158142;"/><!--link Client to LightOffCommand--><path d="M140.2139,99.4784 C171.9676,126.441 218.3328,165.8104 258.279,199.7283 " fill="none" id="Client-LightOffCommand" style="stroke: #A80036; stroke-width: 1.399999976158142;"/><polygon fill="#A80036" points="263.6186,204.2622,257.6374,191.8387,258.2823,199.7319,250.389,200.3768,263.6186,204.2622" style="stroke: #A80036; stroke-width: 1.399999976158142;"/><!--link Client to LightOnCommand--><path d="M102.2,99.4784 C102.2,125.7802 102.2,163.8896 102.2,197.2268 " fill="none" id="Client-LightOnCommand" style="stroke: #A80036; stroke-width: 1.399999976158142;"/><polygon fill="#A80036" points="102.2,204.2622,107.8,191.6622,102.2,197.2622,96.6,191.6622,102.2,204.2622" style="stroke: #A80036; stroke-width: 1.399999976158142;"/><!--
@startuml


class Client{
}

class Light{
    on()
    off()
}

interface Command{
    execute()
    undo
}

class LightOnCommand{
    Light light
    on()
    undo()
}

class LightOffCommand{
    Light light
    off()
    undo()
}

class RemoteController{
    Command command
    buttonPressed()
}

Command <|.. LightOnCommand
Command <|. LightOffCommand
Light <- - LightOnCommand
Light <- - LightOffCommand

Command <- - RemoteController

Client -> Light
Client -> LightOffCommand
Client -> LightOnCommand

note as N1
    调用者(RemoteController) 完全和执行实体(Light)解耦
end note

@enduml

PlantUML version 1.2018.11(Sun Sep 23 00:43:53 CST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1248-b22
Operating System: Windows 10
OS Version: 10.0
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>