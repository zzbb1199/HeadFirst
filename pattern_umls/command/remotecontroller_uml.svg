<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="349.2px" preserveAspectRatio="none" style="width:591px;height:349px;" version="1.1" viewBox="0 0 591 349" width="591.3px" zoomAndPan="magnify"><defs><filter height="300%" id="f1gutx6geoh0u2" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.7999999523162842"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="3.5999999046325684" dy="3.5999999046325684" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--class Client--><rect fill="#FEFECE" filter="url(#f1gutx6geoh0u2)" height="43.2" id="Client" style="stroke: #A80036; stroke-width: 1.3499999642372131;" width="57.6" x="198.9" y="20.7"/><ellipse cx="212.4" cy="35.1" fill="#ADD1B2" rx="9.9" ry="9.9" style="stroke: #A80036; stroke-width: 0.8999999761581421;"/><path d="M212.1187,40.5 Q210.375,40.5 209.3625,39.2133 Q208.35,37.9266 208.35,35.2687 Q208.35,33.0187 209.4187,31.5 Q210.4875,29.9812 212.3437,29.9812 Q212.7516,29.9812 213.1453,29.9812 Q213.5391,29.9812 213.8203,29.9812 Q214.0453,29.9812 214.193,29.9812 Q214.3406,29.9812 214.7062,29.9812 L215.3391,33.3 L214.3828,33.3 Q213.9891,32.3156 213.4758,31.9078 Q212.9625,31.5 212.1328,31.5 Q211.0922,31.5 210.4805,32.5617 Q209.8687,33.6234 209.8687,35.2687 Q209.8687,37.0828 210.3398,38.032 Q210.8109,38.9812 212.0766,38.9812 Q212.9062,38.9812 213.4898,38.468 Q214.0734,37.9547 214.3828,36.7031 L215.3109,37.1672 Q214.9594,38.7422 214.1156,39.6211 Q213.2719,40.5 212.1187,40.5 Z "/><text fill="#000000" font-family="sans-serif" font-size="10.8" lengthAdjust="spacingAndGlyphs" textLength="28.8" x="225" y="40.1019">Client</text><line style="stroke: #A80036; stroke-width: 1.3499999642372131;" x1="199.8" x2="255.6" y1="49.5" y2="49.5"/><line style="stroke: #A80036; stroke-width: 1.3499999642372131;" x1="199.8" x2="255.6" y1="56.7" y2="56.7"/><!--class Light--><rect fill="#FEFECE" filter="url(#f1gutx6geoh0u2)" height="70.2413" id="Light" style="stroke: #A80036; stroke-width: 1.3499999642372131;" width="53.1" x="201.15" y="131.4"/><ellipse cx="214.65" cy="145.8" fill="#ADD1B2" rx="9.9" ry="9.9" style="stroke: #A80036; stroke-width: 0.8999999761581421;"/><path d="M214.3687,151.2 Q212.625,151.2 211.6125,149.9133 Q210.6,148.6266 210.6,145.9687 Q210.6,143.7187 211.6687,142.2 Q212.7375,140.6812 214.5937,140.6812 Q215.0016,140.6812 215.3953,140.6812 Q215.7891,140.6812 216.0703,140.6812 Q216.2953,140.6812 216.443,140.6812 Q216.5906,140.6812 216.9562,140.6812 L217.5891,144 L216.6328,144 Q216.2391,143.0156 215.7258,142.6078 Q215.2125,142.2 214.3828,142.2 Q213.3422,142.2 212.7305,143.2617 Q212.1187,144.3234 212.1187,145.9687 Q212.1187,147.7828 212.5898,148.732 Q213.0609,149.6812 214.3266,149.6812 Q215.1562,149.6812 215.7398,149.168 Q216.3234,148.6547 216.6328,147.4031 L217.5609,147.8672 Q217.2094,149.4422 216.3656,150.3211 Q215.5219,151.2 214.3687,151.2 Z "/><text fill="#000000" font-family="sans-serif" font-size="10.8" lengthAdjust="spacingAndGlyphs" textLength="24.3" x="227.25" y="150.8019">Light</text><line style="stroke: #A80036; stroke-width: 1.3499999642372131;" x1="202.05" x2="253.35" y1="160.2" y2="160.2"/><line style="stroke: #A80036; stroke-width: 1.3499999642372131;" x1="202.05" x2="253.35" y1="167.4" y2="167.4"/><text fill="#000000" font-family="sans-serif" font-size="9.9" lengthAdjust="spacingAndGlyphs" textLength="18" x="206.55" y="182.3454">on()</text><text fill="#000000" font-family="sans-serif" font-size="9.9" lengthAdjust="spacingAndGlyphs" textLength="19.8" x="206.55" y="195.866">off()</text><!--class Command--><rect fill="#FEFECE" filter="url(#f1gutx6geoh0u2)" height="70.2413" id="Command" style="stroke: #A80036; stroke-width: 1.3499999642372131;" width="81.9" x="22.95" y="131.4"/><ellipse cx="36.45" cy="145.8" fill="#B4A7E5" rx="9.9" ry="9.9" style="stroke: #A80036; stroke-width: 0.8999999761581421;"/><path d="M33.6375,142.2 L33.6375,140.6812 L38.9812,140.6812 L38.9812,142.2 L37.2937,142.2 Q37.1531,142.2 37.1109,142.2281 Q37.0687,142.2562 37.0687,142.2984 L37.0687,149.5828 Q37.0687,149.625 37.1109,149.6531 Q37.1531,149.6812 37.2937,149.6812 L38.9812,149.6812 L38.9812,151.2 L33.6375,151.2 L33.6375,149.6812 L35.325,149.6812 Q35.5078,149.6812 35.5289,149.6672 Q35.55,149.6531 35.55,149.5828 L35.55,142.2984 Q35.55,142.2281 35.5289,142.2141 Q35.5078,142.2 35.325,142.2 L33.6375,142.2 Z "/><text fill="#000000" font-family="sans-serif" font-size="10.8" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="53.1" x="49.05" y="150.8019">Command</text><line style="stroke: #A80036; stroke-width: 1.3499999642372131;" x1="23.85" x2="103.95" y1="160.2" y2="160.2"/><text fill="#000000" font-family="sans-serif" font-size="9.9" lengthAdjust="spacingAndGlyphs" textLength="21.6" x="28.35" y="175.1454">undo</text><line style="stroke: #A80036; stroke-width: 1.3499999642372131;" x1="23.85" x2="103.95" y1="180.9206" y2="180.9206"/><text fill="#000000" font-family="sans-serif" font-size="9.9" lengthAdjust="spacingAndGlyphs" textLength="42.3" x="28.35" y="195.866">execute()</text><!--class LightOnCommand--><rect fill="#FEFECE" filter="url(#f1gutx6geoh0u2)" height="83.762" id="LightOnCommand" style="stroke: #A80036; stroke-width: 1.3499999642372131;" width="120.6" x="52.2" y="255.6"/><ellipse cx="65.7" cy="270" fill="#ADD1B2" rx="9.9" ry="9.9" style="stroke: #A80036; stroke-width: 0.8999999761581421;"/><path d="M65.4187,275.4 Q63.675,275.4 62.6625,274.1133 Q61.65,272.8266 61.65,270.1687 Q61.65,267.9187 62.7187,266.4 Q63.7875,264.8812 65.6437,264.8812 Q66.0516,264.8812 66.4453,264.8812 Q66.8391,264.8812 67.1203,264.8812 Q67.3453,264.8812 67.493,264.8812 Q67.6406,264.8812 68.0062,264.8812 L68.6391,268.2 L67.6828,268.2 Q67.2891,267.2156 66.7758,266.8078 Q66.2625,266.4 65.4328,266.4 Q64.3922,266.4 63.7805,267.4617 Q63.1687,268.5234 63.1687,270.1687 Q63.1687,271.9828 63.6398,272.932 Q64.1109,273.8812 65.3766,273.8812 Q66.2062,273.8812 66.7898,273.368 Q67.3734,272.8547 67.6828,271.6031 L68.6109,272.0672 Q68.2594,273.6422 67.4156,274.5211 Q66.5719,275.4 65.4187,275.4 Z "/><text fill="#000000" font-family="sans-serif" font-size="10.8" lengthAdjust="spacingAndGlyphs" textLength="91.8" x="78.3" y="275.0018">LightOnCommand</text><line style="stroke: #A80036; stroke-width: 1.3499999642372131;" x1="53.1" x2="171.9" y1="284.4" y2="284.4"/><text fill="#000000" font-family="sans-serif" font-size="9.9" lengthAdjust="spacingAndGlyphs" textLength="40.5" x="57.6" y="299.3454">Light light</text><line style="stroke: #A80036; stroke-width: 1.3499999642372131;" x1="53.1" x2="171.9" y1="305.1206" y2="305.1206"/><text fill="#000000" font-family="sans-serif" font-size="9.9" lengthAdjust="spacingAndGlyphs" textLength="18" x="57.6" y="320.066">on()</text><text fill="#000000" font-family="sans-serif" font-size="9.9" lengthAdjust="spacingAndGlyphs" textLength="28.8" x="57.6" y="333.5867">undo()</text><!--class LightOffCommand--><rect fill="#FEFECE" filter="url(#f1gutx6geoh0u2)" height="83.762" id="LightOffCommand" style="stroke: #A80036; stroke-width: 1.3499999642372131;" width="119.7" x="204.75" y="255.6"/><ellipse cx="218.25" cy="270" fill="#ADD1B2" rx="9.9" ry="9.9" style="stroke: #A80036; stroke-width: 0.8999999761581421;"/><path d="M217.9687,275.4 Q216.225,275.4 215.2125,274.1133 Q214.2,272.8266 214.2,270.1687 Q214.2,267.9187 215.2687,266.4 Q216.3375,264.8812 218.1937,264.8812 Q218.6016,264.8812 218.9953,264.8812 Q219.3891,264.8812 219.6703,264.8812 Q219.8953,264.8812 220.043,264.8812 Q220.1906,264.8812 220.5562,264.8812 L221.1891,268.2 L220.2328,268.2 Q219.8391,267.2156 219.3258,266.8078 Q218.8125,266.4 217.9828,266.4 Q216.9422,266.4 216.3305,267.4617 Q215.7187,268.5234 215.7187,270.1687 Q215.7187,271.9828 216.1898,272.932 Q216.6609,273.8812 217.9266,273.8812 Q218.7562,273.8812 219.3398,273.368 Q219.9234,272.8547 220.2328,271.6031 L221.1609,272.0672 Q220.8094,273.6422 219.9656,274.5211 Q219.1219,275.4 217.9687,275.4 Z "/><text fill="#000000" font-family="sans-serif" font-size="10.8" lengthAdjust="spacingAndGlyphs" textLength="90.9" x="230.85" y="275.0018">LightOffCommand</text><line style="stroke: #A80036; stroke-width: 1.3499999642372131;" x1="205.65" x2="323.55" y1="284.4" y2="284.4"/><text fill="#000000" font-family="sans-serif" font-size="9.9" lengthAdjust="spacingAndGlyphs" textLength="40.5" x="210.15" y="299.3454">Light light</text><line style="stroke: #A80036; stroke-width: 1.3499999642372131;" x1="205.65" x2="323.55" y1="305.1206" y2="305.1206"/><text fill="#000000" font-family="sans-serif" font-size="9.9" lengthAdjust="spacingAndGlyphs" textLength="19.8" x="210.15" y="320.066">off()</text><text fill="#000000" font-family="sans-serif" font-size="9.9" lengthAdjust="spacingAndGlyphs" textLength="28.8" x="210.15" y="333.5867">undo()</text><!--class RemoteController--><rect fill="#FEFECE" filter="url(#f1gutx6geoh0u2)" height="70.2413" id="RemoteController" style="stroke: #A80036; stroke-width: 1.3499999642372131;" width="117" x="5.4" y="7.2"/><ellipse cx="18.9" cy="21.6" fill="#ADD1B2" rx="9.9" ry="9.9" style="stroke: #A80036; stroke-width: 0.8999999761581421;"/><path d="M18.6187,27 Q16.875,27 15.8625,25.7133 Q14.85,24.4266 14.85,21.7687 Q14.85,19.5187 15.9187,18 Q16.9875,16.4812 18.8437,16.4812 Q19.2516,16.4812 19.6453,16.4812 Q20.0391,16.4812 20.3203,16.4812 Q20.5453,16.4812 20.693,16.4812 Q20.8406,16.4812 21.2062,16.4812 L21.8391,19.8 L20.8828,19.8 Q20.4891,18.8156 19.9758,18.4078 Q19.4625,18 18.6328,18 Q17.5922,18 16.9805,19.0617 Q16.3687,20.1234 16.3687,21.7687 Q16.3687,23.5828 16.8398,24.532 Q17.3109,25.4812 18.5766,25.4812 Q19.4062,25.4812 19.9898,24.968 Q20.5734,24.4547 20.8828,23.2031 L21.8109,23.6672 Q21.4594,25.2422 20.6156,26.1211 Q19.7719,27 18.6187,27 Z "/><text fill="#000000" font-family="sans-serif" font-size="10.8" lengthAdjust="spacingAndGlyphs" textLength="88.2" x="31.5" y="26.6019">RemoteController</text><line style="stroke: #A80036; stroke-width: 1.3499999642372131;" x1="6.3" x2="121.5" y1="36" y2="36"/><text fill="#000000" font-family="sans-serif" font-size="9.9" lengthAdjust="spacingAndGlyphs" textLength="86.4" x="10.8" y="50.9454">Command command</text><line style="stroke: #A80036; stroke-width: 1.3499999642372131;" x1="6.3" x2="121.5" y1="56.7207" y2="56.7207"/><text fill="#000000" font-family="sans-serif" font-size="9.9" lengthAdjust="spacingAndGlyphs" textLength="70.2" x="10.8" y="71.666">buttonPressed()</text><path d="M288.45,29.7 L288.45,54.679 L580.95,54.679 L580.95,38.7 L571.95,29.7 L288.45,29.7 " fill="#FBFB77" filter="url(#f1gutx6geoh0u2)" style="stroke: #A80036; stroke-width: 0.8999999761581421;"/><path d="M571.95,29.7 L571.95,38.7 L580.95,38.7 L571.95,29.7 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 0.8999999761581421;"/><text fill="#000000" font-family="sans-serif" font-size="11.7" lengthAdjust="spacingAndGlyphs" textLength="273.6" x="293.85" y="47.6082">调用者(RemoteController) 完全和执行实体(Light)解耦</text><!--link Command to LightOnCommand--><path d="M83.2495,218.8197 C87.8284,230.9877 92.6521,243.8064 97.0326,255.4469 " fill="none" id="Command-LightOnCommand" style="stroke: #A80036; stroke-width: 0.8999999761581421; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="77.2395,220.7367,76.7963,201.6711,89.0322,216.2988,77.2395,220.7367" style="stroke: #A80036; stroke-width: 0.8999999761581421;"/><!--link Command to LightOffCommand--><path d="M120.2184,203.6403 C146.4921,220.5477 177.7896,240.687 204.5169,257.8869 " fill="none" id="Command-LightOffCommand" style="stroke: #A80036; stroke-width: 0.8999999761581421; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="116.7264,208.8855,104.9985,193.8474,123.5448,198.2898,116.7264,208.8855" style="stroke: #A80036; stroke-width: 0.8999999761581421;"/><!--link Light to LightOnCommand--><path d="M197.6688,201.0681 C182.8161,217.719 164.7639,237.9573 149.1084,255.5086 " fill="none" id="Light-LightOnCommand" style="stroke: #A80036; stroke-width: 0.8999999761581421;"/><polygon fill="#A80036" points="200.9817,197.3538,192.9033,201.0019,197.9862,200.7119,198.2762,205.7948,200.9817,197.3538" style="stroke: #A80036; stroke-width: 0.8999999761581421;"/><!--link Light to LightOffCommand--><path d="M238.7286,206.0001 C243.1836,221.5926 248.3316,239.6097 252.8559,255.4469 " fill="none" id="Light-LightOffCommand" style="stroke: #A80036; stroke-width: 0.8999999761581421;"/><polygon fill="#A80036" points="237.492,201.6711,236.2571,210.4486,238.7289,205.9978,243.1798,208.4695,237.492,201.6711" style="stroke: #A80036; stroke-width: 0.8999999761581421;"/><!--link RemoteController to Command--><path d="M63.9,77.6214 C63.9,92.7441 63.9,110.5839 63.9,126.2331 " fill="none" id="RemoteController-Command" style="stroke: #A80036; stroke-width: 0.8999999761581421;"/><polygon fill="#A80036" points="63.9,131.013,67.5,122.913,63.9,126.513,60.3,122.913,63.9,131.013" style="stroke: #A80036; stroke-width: 0.8999999761581421;"/><!--link Client to Light--><path d="M227.7,63.9639 C227.7,81.0846 227.7,105.8472 227.7,126.6435 " fill="none" id="Client-Light" style="stroke: #A80036; stroke-width: 0.8999999761581421;"/><polygon fill="#A80036" points="227.7,131.2884,231.3,123.1884,227.7,126.7884,224.1,123.1884,227.7,131.2884" style="stroke: #A80036; stroke-width: 0.8999999761581421;"/><!--link Client to LightOffCommand--><path d="M240.9579,63.9621 C251.1594,81.2421 264.4272,106.8921 270,131.4 C278.973,170.8596 276.4179,216.9774 272.3148,250.4339 " fill="none" id="Client-LightOffCommand" style="stroke: #A80036; stroke-width: 0.8999999761581421;"/><polygon fill="#A80036" points="271.6992,255.276,276.2918,247.6946,272.2666,250.8119,269.1492,246.7867,271.6992,255.276" style="stroke: #A80036; stroke-width: 0.8999999761581421;"/><!--link Client to LightOnCommand--><path d="M217.4283,64.1412 C208.7442,81.9567 196.0524,108.261 185.4,131.4 C166.8987,171.5877 146.6361,217.6704 132.1785,250.9274 " fill="none" id="Client-LightOnCommand" style="stroke: #A80036; stroke-width: 0.8999999761581421;"/><polygon fill="#A80036" points="130.2678,255.3277,136.7971,249.3328,132.0608,251.2003,130.1933,246.464,130.2678,255.3277" style="stroke: #A80036; stroke-width: 0.8999999761581421;"/><!--
@startuml


class Client{
}

class Light{
    on()
    off()
}

interface Command{
    execute()
    undo
}

class LightOnCommand{
    Light light
    on()
    undo()
}

class LightOffCommand{
    Light light
    off()
    undo()
}

class RemoteController{
    Command command
    buttonPressed()
}

Command <|.. LightOnCommand
Command <|.. LightOffCommand
Light <- - LightOnCommand
Light <- - LightOffCommand

RemoteController - -> Command

Client - -> Light
Client - -> LightOffCommand
Client - -> LightOnCommand

note as N1
    调用者(RemoteController) 完全和执行实体(Light)解耦
end note

@enduml

PlantUML version 1.2018.11(Sun Sep 23 00:43:53 CST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1248-b22
Operating System: Windows 10
OS Version: 10.0
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>